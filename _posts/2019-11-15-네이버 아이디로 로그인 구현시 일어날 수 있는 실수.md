---  
layout: post
title: 네이버 아이디로 로그인 구현시 일어날 수 있는 실수
gh-repo: daattali/beautiful-jekyll
tags: [sns, login, nave, ios]
comments: true
---  

# 네이버 아이디로 로그인 구현시 일어날 수 있는 실수

네이버 아이디로 로그인 구현시 일어날 수 있는 실수로 실제 서비스 중인 iOS어플에서 해당 부분이 누락되어 로그인이 되지 않는 에러가 발생되었습니다.

~~~
  //첫 로그인 시 호출됨
  func oauth20ConnectionDidFinishRequestACTokenWithAuthCode() {
    self.getNaverEmail()
  }
~~~

첫 로그인시 TokenWithAuthCode() 메소드가 호출되고 로그인 정보를 가져와 앱에서 처리합니다. 그런데 로그아웃 후 두번째 로그인을 시도시 아무런 동작을 하지 않는 버그가 발생하였습니다.

~~~
  //로그아웃 후 두번째 로그인부터 호출됨
  func oauth20ConnectionDidFinishRequestACTokenWithRefreshToken() {
      //앱에서 처리할 정보 받아오는부분을 추가
      //기존에 메소드는 호출 됬지만 처리할 데이터가 없어 앱에서 로그인을 수행하지 못하였음
      self.getNaverEmail() 
  }
  
~~~

이는 두번째 로그인 시도부터 TokenWithRefreshToken() 메소드가 호출되기 때문이었습니다. 따라서 위 메소드에서도 정보를 가져오는 코드를 추가하여 버그는 수정하였습니다. 
하지만 임시방편은 되었지만 근본적으로는 로그아웃이 정상적으로 동작하지 않아 발생한 문제로 추정되어 확인이 필요합니다.



